import anndata as ad

## VIASH START
# Note: this section is auto-generated by viash at runtime. To edit it, make changes
# in config.vsh.yaml and then run `viash config inject config.vsh.yaml`.
par = {
  'input_train': 'resources_test/.../train.h5ad',
  'output': 'output.h5ad'
}
meta = {
  'name': 'submission'
}
## VIASH END

print('Reading input files', flush=True)
input_train = ad.read_h5ad(par['input_train'])

print('Running no-denoise baseline (copy counts)', flush=True)
denoised = input_train.layers["counts"].copy()

print("Write output AnnData to file", flush=True)
output = ad.AnnData(
  layers={"denoised": denoised},
  obs=input_train.obs[[]],
  var=input_train.var[[]],
  uns={
    "dataset_id": input_train.uns["dataset_id"],
    "method_id": meta["name"]
  }
)
output.write_h5ad(par['output'], compression='gzip')
