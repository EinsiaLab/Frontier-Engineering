# ISCSO 2015 — 45 杆 2D 桁架尺寸 + 形状优化

## 1. 背景

结构优化是工程领域的基础学科，目标是在满足安全约束的条件下设计重量最小的结构。**国际结构优化学生竞赛（ISCSO）**由 Bright Optimizer 组织，每年提供具有挑战性的真实结构优化问题。

ISCSO 2015 问题是一个 **2D 平面桁架**优化问题，同时涉及**尺寸优化**（截面面积）和**形状优化**（节点位置）。这种组合优化使问题比纯尺寸优化困难得多，因为几何变化同时影响杆件长度和结构刚度矩阵。

## 2. 问题描述

结构为一个跨度 20 米的 **45 杆平面桁架**，由以下部分组成：

- **20 个节点**：11 个下弦节点（固定几何）和 9 个上弦节点（y 坐标可变）
- **45 根杆件**：下弦杆（10）、上弦杆（8）、竖杆（9）、左斜杆（9）、右斜杆（9）
- **2 个载荷工况**：集中跨中载荷和分布载荷

任务是通过优化以下变量使总结构重量最小：
1. 所有 45 根杆件的截面面积
2. 9 个上弦节点的竖向（y）坐标

同时满足所有载荷工况下的应力和位移约束。

### 2.1 结构布局

```
    11---12---13---14---15---16---17---18---19       (上弦，y 可变)
   /|\  /|\  /|\  /|\  /|\  /|\  /|\  /|\  /|\
  / | \/ | \/ | \/ | \/ | \/ | \/ | \/ | \/ | \
 /  | /\ | /\ | /\ | /\ | /\ | /\ | /\ | /\ |  \
0---1----2----3----4----5----6----7----8----9---10    (下弦，y=0)
^                                              o
铰支座                                        滚支座
```

- 节点 0 和 10 为支座（节点 0：铰支座；节点 10：滚支座）
- 上弦节点 11–19 位于下弦节点 1–9 的正上方
- 节点 11–19 的 y 坐标为设计变量

## 3. 数学定义

### 3.1 设计变量

总维度：**54**

```
x = [A_0, A_1, ..., A_44, y_11, y_12, ..., y_19]
```

- `A_i`（i = 0..44）：第 i 根杆件的截面面积，单位 mm²
- `y_j`（j = 11..19）：上弦第 j 节点的 y 坐标，单位 mm

### 3.2 变量范围

| 变量 | 下界 | 上界 | 单位 |
| :--- | ---: | ---: | :--- |
| A_i（截面面积） | 10.0 | 10000.0 | mm² |
| y_j（节点 y 坐标） | 500.0 | 4000.0 | mm |

### 3.3 目标函数

最小化总结构重量：

```
W(x) = sum_{i=0}^{44} rho * L_i(x) * A_i
```

其中：
- `rho = 7.86e-6 kg/mm³`（钢材密度）
- `L_i(x)` 为杆件 i 的长度（取决于节点坐标，即形状变量）
- `A_i` 为杆件 i 的截面面积

**注意**：杆件长度 `L_i` 随形状变量 `y_j` 变化，使目标函数为非线性。

### 3.4 约束条件

对于**每个**载荷工况 `k = 0, 1`：

1. **应力约束**（所有杆件）：

```
|sigma_{i,k}(x)| <= sigma_allow = 172.4 MPa,  对 i = 0..44
```

2. **位移约束**（所有自由度）：

```
|delta_{j,k}(x)| <= delta_allow = 50.0 mm,  对所有自由自由度 j
```

3. **变量范围约束**（见第 3.2 节）

一个解是**可行的**，当且仅当所有载荷工况下的所有约束都被满足。

## 4. 物理模型

结构为**2D 平面桁架**结构。需要使用适当的结构分析方法（如有限元分析）计算结构响应（节点位移和杆件应力），以评估约束满足情况。

关键物理关系：
- 杆件应力取决于外载荷、杆件截面积和结构几何
- 节点位移取决于结构刚度，而刚度是杆件面积和几何的函数
- 所有载荷工况下的应力和位移约束必须同时满足

## 5. 问题数据

所有问题数据存储在 `references/problem_data.json` 中。关键参数：

### 5.1 材料属性

| 属性 | 值 | 单位 |
| :--- | ---: | :--- |
| 弹性模量 (E) | 200,000 | MPa |
| 密度 (rho) | 7.86e-6 | kg/mm³ |

### 5.2 约束限值

| 约束 | 值 | 单位 |
| :--- | ---: | :--- |
| 许用应力 (sigma_allow) | 172.4 | MPa |
| 许用位移 (delta_allow) | 50.0 | mm |

### 5.3 载荷工况

| 工况 | 描述 | 施加载荷 |
| :--- | :--- | :--- |
| LC 0 | 集中跨中载荷 | 节点 5 处 100 kN 向下 |
| LC 1 | 分布载荷 | 节点 3、5、7 处各 50 kN 向下 |

### 5.4 支座条件

| 节点 | 类型 | 固定自由度 |
| :--- | :--- | :--- |
| 0 | 铰支座 | x, y |
| 10 | 滚支座 | 仅 y |

## 6. 输入/输出格式

### 6.1 提交格式

求解器必须在工作目录输出名为 `submission.json` 的文件：

```json
{
  "benchmark_id": "iscso_2015",
  "solution_vector": [A_0, A_1, ..., A_44, y_11, y_12, ..., y_19],
  "algorithm": "<算法名称>",
  "num_evaluations": <整数>
}
```

- `solution_vector`：54 个浮点数的数组
  - 索引 0–44：截面面积（mm²）
  - 索引 45–53：节点 11–19 的 y 坐标（mm）

### 6.2 评估输出

评估器返回：

```json
{
  "objective": <重量 kg>,
  "feasible": <true/false>,
  "max_stress_violation": <max(|sigma| - sigma_allow), 可行时为 0>,
  "max_displacement_violation": <max(|delta| - delta_allow), 可行时为 0>,
  "score": <可行时为重量，否则为 Infinity>
}
```

## 7. 评分标准

1. **可行性检查**：所有载荷工况下的应力和位移约束必须满足（容差 `tol = 1e-6`）。
2. **如不可行**：`score = +Infinity`
3. **如可行**：`score = W(x)`（总结构重量，单位 kg）
4. **排名依据**：分数越低越好。

## 8. 参考资料

- ISCSO 竞赛：[http://www.brightoptimizer.com/](http://www.brightoptimizer.com/)
- 问题数据：`references/problem_data.json`
- 评估代码：`verification/evaluator.py`

