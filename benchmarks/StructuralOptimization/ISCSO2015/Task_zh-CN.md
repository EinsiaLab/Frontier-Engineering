# ISCSO 2015 — 45 杆 2D 桁架尺寸 + 形状优化

## 问题

最小化 2D 平面桁架结构重量：
- **结构**：20 节点，45 杆件，跨度 20 m (20000 mm)
- **设计变量**：共 54 个
  - 45 个面积变量：`A_1, A_2, ..., A_45`（每个杆件一个）
  - 9 个形状变量：`y_2, y_4, y_6, y_8, y_10, y_12, y_14, y_16, y_18`（上弦节点 y 坐标）
- **载荷工况**：单个载荷工况，3 个垂直力
  - 节点 15：60 kips (266.9 kN) 向下
  - 节点 17：80 kips (355.9 kN) 向下
  - 节点 19：60 kips (266.9 kN) 向下
- **约束**：
  - 应力：所有杆件 `|σ_i| ≤ 30 ksi` (206.8 MPa)
  - 位移：所有自由自由度 `|δ_j| ≤ 2.0 in` (50.8 mm)
- **评估次数限制**：最多 7,000 次 FEM 评估

## 参数

### 材料属性
- **弹性模量**：E = 30,000 ksi = 206.8 GPa
- **密度**：ρ = 0.283 lb/in³ = 7.86e-6 kg/mm³

### 约束限值
- **应力限值**：30 ksi = 206.8 MPa（拉伸和压缩）
- **位移限值**：±2.0 in = ±50.8 mm（水平和垂直）

### 支座
- **节点 1**：铰支座（固定 x 和 y 位移，左端）
- **节点 20**：滚支座（仅固定 y 位移，右端）

### 节点编号
- 节点 1-20：顺序编号
- **下弦**：节点 1, 3, 5, 7, 9, 11, 13, 15, 17, 19（奇数）
- **上弦**：节点 2, 4, 6, 8, 10, 12, 14, 16, 18（偶数，形状变量）

### 变量范围
- **面积变量** (`A_1` 到 `A_45`)：
  - 范围：0.1 到 15.0 in² (64.5 到 9677 mm²)
  - 离散值：`{0.1, 0.2, 0.3, ..., 14.9, 15.0}` in²
  - 步长：0.1 in² (64.5 mm²)
- **形状变量** (`y_2, y_4, ..., y_18`)：
  - 范围：100 到 1400 in (2540 到 35560 mm)
  - 离散整数：`{100, 101, 102, ..., 1399, 1400}` in
  - 步长：1 in (25.4 mm)

## 设计变量

解向量按以下顺序包含 54 个元素：
```
x = [A_1, A_2, ..., A_45, y_2, y_4, y_6, y_8, y_10, y_12, y_14, y_16, y_18]
```

- **前 45 个元素**：杆件 1-45 的横截面积
  - `A_i ∈ {0.1, 0.2, ..., 15.0}` in²（离散，步长 0.1 in²）
- **后 9 个元素**：上弦节点 2, 4, 6, 8, 10, 12, 14, 16, 18 的 y 坐标
  - `y_j ∈ {100, 101, ..., 1400}` in（离散整数）

**重要**：优化必须从设计空间中的**随机初始点**开始。

## 目标函数

最小化结构重量：
```
W(x) = Σ (ρ * L_i(x) * A_i)
```

其中：
- `ρ = 0.283 lb/in³` = 7.86e-6 kg/mm³（材料密度）
- `L_i(x)` = 杆件 i 的长度（取决于形状变量）
- `A_i` = 杆件 i 的横截面积
- 求和遍及所有 45 个杆件

## 约束

单个载荷工况下，所有约束必须满足：

1. **应力约束**（所有 45 个杆件）：
   ```
   |σ_i| ≤ 30 ksi = 206.8 MPa
   ```
   其中 `σ_i` 是杆件 i 的轴向应力（正 = 拉伸，负 = 压缩）

2. **位移约束**（所有自由自由度）：
   ```
   |δ_j| ≤ 2.0 in = 50.8 mm
   ```
   其中 `δ_j` 是自由自由度 j 的位移

只有当所有约束都满足（容差 1e-6）时，解才是**可行的**。

## 提交格式

在 `temp/submission.json` 输出 JSON 文件：

```json
{
  "benchmark_id": "iscso_2015",
  "solution_vector": [A_1, A_2, ..., A_45, y_2, y_4, y_6, y_8, y_10, y_12, y_14, y_16, y_18],
  "algorithm": "<你的算法名称>",
  "num_evaluations": <使用的FEM评估次数>
}
```

**要求**：
- `solution_vector`：54 个数字的数组（45 个面积 + 9 个形状坐标）
- `algorithm`：描述优化方法的字符串
- `num_evaluations`：整数 ≤ 7,000（FEM 调用次数）

**注意**：评估器独立跟踪并验证评估次数限制。

## 评分

- **可行解**：分数 = 结构重量（kg），**越低越好**
- **不可行解**：分数 = +∞

最终设计必须是可行的（不允许约束违反）。

## 参考资料

- 问题数据：`references/problem_data.json`
- 评估器：`verification/evaluator.py`
- FEM 求解器：`verification/fem_truss2d.py`
